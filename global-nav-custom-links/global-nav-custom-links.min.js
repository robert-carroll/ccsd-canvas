/**
// @name        Global Nav - Custom Links
// @namespace   https://github.com/robert-carroll/ccsd-canvas
//
**/
(function () {
  'use strict';
  // configure links
  const links = [
    {
      title: 'Canvas Community',
      icon_svg: 'icon-heart',
      href: 'https://community.canvaslms.com/',
      target: ''
    }, // ready for another
  ];
  // leave this alone
  const globalNavCustomLinks=()=>{const e='div[role="dialog"][aria-label="Global Navigation"] ul',t=(t,o=!0)=>{t.forEach((t=>{((t,o=!0)=>{const s=t.title.replace(/\W/g,"_").toLowerCase(),n=o?e:"#menu",r=document.querySelector(`${n} li:last-child`),i=o?`${e} svg[name="IconDashboard"]`:"#global_nav_dashboard_link";var c=document.querySelector(i).closest("li").cloneNode(!0);c.setAttribute("id",(o?"rspv-":"")+`global_nav_${s}_link-item`),c.querySelector("svg").parentElement.classList.add((o?"rspv-":"")+`svg-${s}-holder`),c.querySelector("a").setAttribute("id",(o?"rspv-":"")+`global_nav_${s}_link`),c.querySelector("a").href=t.href,void 0!==t.target&&t.target.includes("_blank","_self","_parent")&&c.querySelector("a").setAttribute("target",t.target);try{(c.querySelector('span[letter-spacing="normal"')||c.querySelector(".menu-item__text")||c.querySelector('span[class$="text"]')).textContent=t.title}catch(e){console.log(e)}const l=c.querySelector((o?".rspv-svg":".svg")+`-${s}-holder`);if(1==o)var a=c.querySelector("svg").classList;else c.classList.remove("ic-app-header__menu-list-item--active"),a=["ic-icon-svg","menu-item__icon","ic-icon-svg--apps","ic-icon-svg-custom-tray","gnct_icon_svg"];if(c.querySelector("svg").remove(),1==/^icon-[a-z]/.test(t.icon_svg)?l.insertAdjacentHTML("afterbegin",`<div id="${(o?"rspv-":"")+`global_nav_${s}_svg`}" role="presentation"><i class="icon-line ${t.icon_svg} gnct_inst_menu_icon"></i></div>`):/^http/.test(t.icon_svg)?fetch(t.icon_svg,{mode:"cors",method:"GET",headers:{"Access-Control-Request-Method":"GET",Accept:"text/plain","Content-Type":"text/plain"}}).then((e=>e.text())).then((e=>{l.insertAdjacentHTML("afterbegin",e),c.querySelector("svg").setAttribute("id",(o?"rspv-":"")+`global_nav_${s}_svg`),a.forEach((e=>{c.querySelector("svg").classList.add(e)}))})).catch(console.error.bind(console)):/^<svg/.test(t.icon_svg)&&(l.insertAdjacentHTML("afterbegin",t.icon_svg),c.querySelector("svg").setAttribute("id",`rspv-global_nav_${s}_svg`),a.forEach((e=>{c.querySelector("svg").classList.add(e)}))),void 0!==t.position&&"number"==typeof t.position){var v=(1==o?e:"#menu")+` > li:nth-of-type(${t.position})`;document.querySelector(v).after(c)}else void 0!==t.position&&"after"==t.position?r.after(c):r.before(c)})(t,o)}))},o=function(n,r){let i=document.querySelector(e);i?null!=i&&(r.disconnect(),t(links,!0),s()):void 0===r&&new MutationObserver(o).observe(document.body,{childList:!0,subtree:!0})},s=function(t,n){let r=document.querySelector(e);null==r?null==r&&(n.disconnect(),o()):void 0===n&&new MutationObserver(s).observe(document.body,{childList:!0,subtree:!0})};o(),t(links,!1)};
  // handle css, you can remove or comment the next line if you're also using Global Nav Custom Tray
  !function(){if(0==document.querySelectorAll('[data-global-nav-custom-css="set"]').length){let t={"i.gnct_inst_menu_icon:before":"font-size: 32px; width: 32px; line-height: 32px;","i.gnct_inst_menu_icon":"width: 32px; height: 32px; font-style: bold;",".gnct_icon_svg":"width: 32px !important; height: 32px !important; font-style: bold;"};if(void 0!==t&&Object.keys(t).length>0){let e=document.createElement("style");e.setAttribute("data-global-nav-custom-css","set"),document.head.appendChild(e);let n=e.sheet;Object.keys(t).forEach((function(e){n.insertRule(`${e} { ${t[e]} }`,n.cssRules.length)}))}}}();
  // add links to menu
  globalNavCustomLinks(links);
})();