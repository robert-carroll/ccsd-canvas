/**
// @name        Global Nav - Custom Links
// @namespace   https://github.com/robert-carroll/ccsd-canvas
//
**/
(function () {
  'use strict';
  // configure links
  const links = [
    {
      title: 'Canvas Community',
      icon_svg: 'icon-heart',
      href: 'https://community.canvaslms.com/',
      target: ''
    }, // ready for another
  ];
  // leave this alone
  const globalNavCustomLinks=()=>{const e='div[role="dialog"][aria-label="Global Navigation"] ul',t=(t,i=!0)=>{const n=t.title.replace(/\W/g,"_").toLowerCase();if(1==i){const e=document.querySelector('div[role="dialog"][aria-label="Global Navigation"] ul svg[name="IconDashboard"]').closest("li");var s=document.querySelector('div[role="dialog"][aria-label="Global Navigation"] ul li:last-child'),o=e.cloneNode(!0);o.setAttribute("id",`resp-global_nav_${n}_link`),o.querySelector("svg").parentElement.classList.add(`rspv-svg-${n}-holder`),o.querySelector("a").href=t.href,o.querySelector('span[class$="text"]').textContent=t.title;var l=o.querySelector(`.rspv-svg-${n}-holder`);o.querySelector("svg").remove(),void 0!==t.target&&t.target.includes("_blank","_self","_parent")&&o.querySelector("a").setAttribute("target",t.target)}else var a=$("<li>",{id:`global_nav_${n}_link`,class:"menu-item ic-app-header__menu-list-item",html:`<a id="global_nav_${n}_link" role="button" href="${t.href}" target="${t.target}" class="ic-app-header__menu-list-link">\n <div class="menu-item-icon-container" role="presentation"><span class="svg-${n}-holder"></span></div>\n <div class="menu-item__text">${t.title}</div></a>`});if(1==/^icon-[a-z]/.test(t.icon_svg))1==i?l.insertAdjacentHTML("afterbegin",`<div id="resp-global_nav_${n}_svg" role="presentation"><i class="icon-line ${t.icon_svg} gnct_inst_menu_icon"></i></div>`):a.find(`.svg-${n}-holder`).append($("<div>",{id:`global_nav_${n}_svg`,class:"menu-item-icon-container",html:`<i class="icon-line ${t.icon_svg} gnct_inst_menu_icon"></i></div>`,role:"presentation"}));else if(/^http/.test(t.icon_svg))1==i?fetch(t.icon_svg,{mode:"cors",method:"GET",headers:{"Access-Control-Request-Method":"GET",Accept:"text/plain","Content-Type":"text/plain"}}).then((e=>e.text())).then((e=>{l.insertAdjacentHTML("afterbegin",e),o.querySelector("svg").setAttribute("id",`resp-global_nav_${n}_svg`),o.querySelector("svg").classList.add("css-1216v6a-inlineSVG-svgIcon")})).catch(console.error.bind(console)):a.find(`.svg-${n}-holder`).load(t.icon_svg,(function(){let e=$(this).find("svg")[0];e.setAttribute("id",`global_nav_${n}_svg`),e.setAttribute("class","ic-icon-svg menu-item__icon ic-icon-svg--apps svg-icon-help ic-icon-svg-custom-tray gnct_icon_svg")}));else if(/^<svg/.test(t.icon_svg))if(1==i)l.insertAdjacentHTML("afterbegin",t.icon_svg),o.querySelector("svg").setAttribute("id",`resp-global_nav_${n}_svg`),o.querySelector("svg").classList.add("css-1216v6a-inlineSVG-svgIcon");else{a.find(`.svg-${n}-holder`).append($(t.icon_svg));let e=a.find(`.svg-${n}-holder`).find("svg")[0];e.setAttribute("id",`global_nav_${n}_svg`),e.setAttribute("class","ic-icon-svg menu-item__icon ic-icon-svg--apps svg-icon-help ic-icon-svg-custom-tray gnct_icon_svg")}if(void 0!==t.position&&"number"==typeof t.position){var r=(1==i?e:"#menu")+` > li:nth-of-type(${t.position})`;1==i?document.querySelector(r).after(o):$(r).after(a)}else void 0!==t.position&&"after"==t.position?1==i?s.after(o):$("#menu").append(a):1==i?s.before(o):$("#menu li:last").before(a)},i=(e,i=!0)=>{e.forEach((e=>{t(e,i)}))},n=function(t,o){let l=document.querySelector(e);l?null!=l&&(o.disconnect(),i(links,!0),s()):void 0===o&&new MutationObserver(n).observe(document.body,{childList:!0,subtree:!0})},s=function(t,i){let o=document.querySelector(e);null==o?null==o&&(i.disconnect(),n()):void 0===i&&new MutationObserver(s).observe(document.body,{childList:!0,subtree:!0})};n(),i(links,!1)};
  // handle css, you can remove or comment the next line if you're also using Global Nav Custom Tray
  !function(){if(0==document.querySelectorAll('[data-global-nav-custom-css="set"]').length){let t={"i.gnct_inst_menu_icon:before":"font-size: 32px; width: 32px; line-height: 32px;","i.gnct_inst_menu_icon":"width: 32px; height: 32px; font-style: bold;",".gnct_icon_svg":"width: 32px !important; height: 32px !important; font-style: bold;"};if(void 0!==t&&Object.keys(t).length>0){let e=document.createElement("style");e.setAttribute("data-global-nav-custom-css","set"),document.head.appendChild(e);let n=e.sheet;Object.keys(t).forEach((function(e){n.insertRule(`${e} { ${t[e]} }`,n.cssRules.length)}))}}}();
  // add links to menu
  globalNavCustomLinks(links);
})();