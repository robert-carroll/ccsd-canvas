/**
// @name        Global Nav - Custom Links
// @namespace   https://github.com/robert-carroll/ccsd-canvas
//
**/
(function () {
  'use strict';
  // configure links
  const links = [
    {
      title: 'Canvas Community',
      icon_svg: 'icon-heart',
      href: 'https://community.canvaslms.com/',
      target: ''
    }, // ready for another
  ];
  // leave this alone
  const globalNavCustomLinks=()=>{const e='div[role="dialog"][aria-label="Global Navigation"] ul',t=(t,o=!0)=>{t.forEach((t=>{((t,o=!0)=>{const r=t.title.replace(/\W/g,"_").toLowerCase();if(1==o){const e=document.querySelector('div[role="dialog"][aria-label="Global Navigation"] ul svg[name="IconDashboard"]').closest("li");var l=document.querySelector('div[role="dialog"][aria-label="Global Navigation"] ul li:last-child'),i=e.cloneNode(!0);i.setAttribute("id",`resp-global_nav_${r}_link-item`),i.querySelector("svg").parentElement.classList.add(`rspv-svg-${r}-holder`),i.querySelector("a").setAttribute("id",`resp-global_nav_${r}_link`),i.querySelector("a").href=t.href,i.querySelector('span[class$="text"]').textContent=t.title;var s=i.querySelector(`.rspv-svg-${r}-holder`),n=i.querySelector("svg").classList;i.querySelector("svg").remove(),void 0!==t.target&&t.target.includes("_blank","_self","_parent")&&i.querySelector("a").setAttribute("target",t.target)}else{const e=document.querySelector("#global_nav_dashboard_link").closest("li");l=document.querySelector("#menu li:last-child");var a=e.cloneNode(!0);a.classList.remove("ic-app-header__menu-list-item--active"),a.setAttribute("id",`global_nav_${r}_link-item`),a.querySelector("svg").parentElement.classList.add(`svg-${r}-holder`),a.querySelector("a").setAttribute("id",`global_nav_${r}_link`),a.querySelector("a").href=t.href,a.querySelector(".menu-item__text").textContent=t.title,s=a.querySelector(`.svg-${r}-holder`),n=["ic-icon-svg","menu-item__icon","ic-icon-svg--apps","ic-icon-svg-custom-tray","gnct_icon_svg"],a.querySelector("svg").remove(),void 0!==t.target&&t.target.includes("_blank","_self","_parent")&&a.querySelector("a").setAttribute("target",t.target)}if(1==/^icon-[a-z]/.test(t.icon_svg))s.insertAdjacentHTML("afterbegin",`<div id="${(o?"resp-":"")+`global_nav_${r}_svg`}" role="presentation"><i class="icon-line ${t.icon_svg} gnct_inst_menu_icon"></i></div>`);else if(/^http/.test(t.icon_svg))fetch(t.icon_svg,{mode:"cors",method:"GET",headers:{"Access-Control-Request-Method":"GET",Accept:"text/plain","Content-Type":"text/plain"}}).then((e=>e.text())).then((e=>{let t=o?i:a;s.insertAdjacentHTML("afterbegin",e),t.querySelector("svg").setAttribute("id",(o?"resp-":"")+`global_nav_${r}_svg`),n.forEach((e=>{t.querySelector("svg").classList.add(e)}))})).catch(console.error.bind(console));else if(/^<svg/.test(t.icon_svg)){let e=o?i:a;s.insertAdjacentHTML("afterbegin",t.icon_svg),e.querySelector("svg").setAttribute("id",`resp-global_nav_${r}_svg`),n.forEach((t=>{e.querySelector("svg").classList.add(t)}))}if(void 0!==t.position&&"number"==typeof t.position){var c=(1==o?e:"#menu")+` > li:nth-of-type(${t.position})`;document.querySelector(c).after(o?i:a)}else void 0!==t.position&&"after"==t.position?l.after(o?i:a):l.before(o?i:a)})(t,o)}))},o=function(l,i){let s=document.querySelector(e);s?null!=s&&(i.disconnect(),t(links,!0),r()):void 0===i&&new MutationObserver(o).observe(document.body,{childList:!0,subtree:!0})},r=function(t,l){let i=document.querySelector(e);null==i?null==i&&(l.disconnect(),o()):void 0===l&&new MutationObserver(r).observe(document.body,{childList:!0,subtree:!0})};o(),t(links,!1)};
  // handle css, you can remove or comment the next line if you're also using Global Nav Custom Tray
  !function(){if(0==document.querySelectorAll('[data-global-nav-custom-css="set"]').length){let t={"i.gnct_inst_menu_icon:before":"font-size: 32px; width: 32px; line-height: 32px;","i.gnct_inst_menu_icon":"width: 32px; height: 32px; font-style: bold;",".gnct_icon_svg":"width: 32px !important; height: 32px !important; font-style: bold;"};if(void 0!==t&&Object.keys(t).length>0){let e=document.createElement("style");e.setAttribute("data-global-nav-custom-css","set"),document.head.appendChild(e);let n=e.sheet;Object.keys(t).forEach((function(e){n.insertRule(`${e} { ${t[e]} }`,n.cssRules.length)}))}}}();
  // add links to menu
  globalNavCustomLinks(links);
})();