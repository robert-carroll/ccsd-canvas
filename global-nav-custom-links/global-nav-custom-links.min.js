/**
// @name        Global Nav - Custom Links
// @namespace   https://github.com/robert-carroll/ccsd-canvas
//
**/
(function () {
  'use strict';
  // configure links
  const links = [
    {
      title: 'Canvas Community',
      icon_svg: 'icon-heart',
      href: 'https://community.canvaslms.com/',
      target: ''
    }, // ready for another
  ];
  // leave this alone
  const globalNavCustomLinks=()=>{const e="#menu",t='div[role="dialog"][aria-label="Global Navigation"] ul';if(!document.querySelector(e)&&!document.querySelector(t))return;const o=(o,r=!0)=>{o.forEach((o=>{((o,r=!0)=>{const s=o.title.replace(/\W/g,"_").toLowerCase(),n=r?t:e,i=document.querySelector(`${n} li:last-child`),c=r?`${t} svg[name="IconDashboard"]`:"#global_nav_dashboard_link";var l=document.querySelector(c).closest("li").cloneNode(!0);l.setAttribute("id",(r?"rspv-":"")+`global_nav_${s}_link-item`),l.querySelector("svg").parentElement.classList.add((r?"rspv-":"")+`svg-${s}-holder`),l.querySelector("a").setAttribute("id",(r?"rspv-":"")+`global_nav_${s}_link`),l.querySelector("a").href=o.href,void 0!==o.target&&o.target.includes("_blank","_self","_parent")&&l.querySelector("a").setAttribute("target",o.target);try{(l.querySelector('span[letter-spacing="normal"')||l.querySelector(".menu-item__text")||l.querySelector('span[class$="text"]')).textContent=o.title}catch(e){console.log(e)}const a=l.querySelector((r?".rspv-svg":".svg")+`-${s}-holder`);var v;if(1==r?v=l.querySelector("svg").classList:(l.classList.remove("ic-app-header__menu-list-item--active"),v=["ic-icon-svg","menu-item__icon","ic-icon-svg--apps","ic-icon-svg-custom-tray","gnct_icon_svg"]),l.querySelector("svg").remove(),1==/^icon-[a-z]/.test(o.icon_svg)?a.insertAdjacentHTML("afterbegin",`<div id="${(r?"rspv-":"")+`global_nav_${s}_svg`}" role="presentation"><i class="icon-line ${o.icon_svg} gnct_inst_menu_icon"></i></div>`):/^http/.test(o.icon_svg)?fetch(o.icon_svg,{mode:"cors",method:"GET",headers:{"Access-Control-Request-Method":"GET",Accept:"text/plain","Content-Type":"text/plain"}}).then((e=>e.text())).then((e=>{a.insertAdjacentHTML("afterbegin",e),l.querySelector("svg").setAttribute("id",(r?"rspv-":"")+`global_nav_${s}_svg`),v.forEach((e=>{l.querySelector("svg").classList.add(e)}))})).catch(console.error.bind(console)):/^<svg/.test(o.icon_svg)&&(a.insertAdjacentHTML("afterbegin",o.icon_svg),l.querySelector("svg").setAttribute("id",`rspv-global_nav_${s}_svg`),v.forEach((e=>{l.querySelector("svg").classList.add(e)}))),void 0!==o.position&&"number"==typeof o.position){var u=(1==r?t:"#menu")+` > li:nth-of-type(${o.position})`;document.querySelector(u).after(l)}else void 0!==o.position&&"after"==o.position?i.after(l):i.before(l)})(o,r)}))},r=function(e,n){let i=document.querySelector(t);i?null!=i&&(n.disconnect(),o(links,!0),s()):void 0===n&&new MutationObserver(r).observe(document.body,{childList:!0,subtree:!0})},s=function(e,o){let n=document.querySelector(t);null==n?null==n&&(o.disconnect(),r()):void 0===o&&new MutationObserver(s).observe(document.body,{childList:!0,subtree:!0})};r(),o(links,!1)};
  // handle css, you can remove or comment the next line if you're also using Global Nav Custom Tray
  !function(){if(0==document.querySelectorAll('[data-global-nav-custom-css="set"]').length){let t={"i.gnct_inst_menu_icon:before":"font-size: 32px; width: 32px; line-height: 32px;","i.gnct_inst_menu_icon":"width: 32px; height: 32px; font-style: bold;",".gnct_icon_svg":"width: 32px !important; height: 32px !important; font-style: bold;"};if(void 0!==t&&Object.keys(t).length>0){let e=document.createElement("style");e.setAttribute("data-global-nav-custom-css","set"),document.head.appendChild(e);let n=e.sheet;Object.keys(t).forEach((function(e){n.insertRule(`${e} { ${t[e]} }`,n.cssRules.length)}))}}}();
  // add links to menu
  globalNavCustomLinks(links);
})();