/**
// @name        Global Nav - Custom Trays
// @namespace   https://github.com/robert-carroll/ccsd-canvas
//
**/
(function () {
  'use strict';
  // configure trays
  const InstIconTray = {
    title: 'InstIconTray', // the menu item or tray name, what users will see
    icon_svg: 'icon-pin',
    trayLinks: [{
        href: 'http://www.example.com/your-library',
        title: 'Library',
        desc: 'Optional text description'
      },
      {
        href: 'http://www.google.com',
        title: 'Google'
      },
      {
        href: 'http://www.example.com/help-desk',
        title: 'Help Desk',
        desc: 'Optional text description'
      }
    ],
    footer: 'Optional footer text, put whatever you want here, or leave it blank.'
  }
  // leave this alone
const globalNavCustomTray=t=>{const n=t.title.replace(/\W/g,"_").toLowerCase(),s=`global_nav_${n}_tray`,i="ic-app-header__menu-list-item",e=`${i}--active`;var a=`<span id="${s}" style="display: none;">\n    <span class="global-nav-custom-tray gnct-easing">\n    <span role="region" aria-label="Global navigation tray" class="Global-navigation-tray">\n\n    <span class="gcnt-tray-close-wrapper">\n    <button id="${s}_close" type="button" role="button" tabindex="0" class="gcnt-tray-close-btn" style="margin:0px;">\n    <span class="gcnt-tray-close-svg-wrapper">\n    <svg name="IconXSolid" viewBox="0 0 1920 1920" style="fill:currentColor;width:1em;height:1em;" width="1em" height="1em" aria-hidden="true" role="presentation" disabled="true">\n    <g role="presentation"><svg version="1.1" viewBox="0 0 1920 1920">\n    <path d="M1743.858.012L959.869 783.877 176.005.012 0 176.142l783.74 783.989L0 1743.87 176.005 1920l783.864-783.74L1743.858 1920l176.13-176.13-783.865-783.74 783.865-783.988z" stroke="none" stroke-width="1"></path>\n    </svg></g></svg><span class="gcnt-tray-close-txt">Close</span></span></button></span>\n\n    <div class="tray-with-space-for-global-nav">\n    <div id="custom_${n}_tray" class="gnct-content-wrap">\n    <h1 class="gcnt-tray-h1">${t.title}</h1><hr role="presentation"/>\n\n    <ul class="gcnt-list">`;t.trayLinks.forEach((function(t){a+=`<li class="gcnt-list-item">\n        <span class="gcnt-list-link-wrapper">\n        <a target="_blank" rel="noopener" class="gcnt-list-link" href="${t.href}" role="button" tabindex="0">${t.title}</a>\n        </span>`,a+=t.desc&&t.desc.length>1?`<div class="gcnt-link-desc">${t.desc}</div>`:"",a+="</li>"})),a+=t.footer.length>1?`<li class="gcnt-list-item"><hr role="presentation"/></li><li class="gcnt-list-item">${t.footer}</li>`:"",a+="</ul></div></div></span></span></span>";var l=$("#main"),o=$("#menu"),c=$("<li>",{id:`global_nav_${n}_menu`,class:`${i} rc-gnct`,html:`<a id="global_nav_${n}_link" role="button" href="javascript:void(0)" class="ic-app-header__menu-list-link">\n        <div class="menu-item-icon-container" role="presentation"><span class="svg-${n}-holder"></span></div>\n        <div class="menu-item__text">${t.title}</div></a>`});if(1==/^icon-[a-z]/.test(t.icon_svg))c.find(`.svg-${n}-holder`).append($("<div>",{id:`global_nav_${n}_svg`,class:"menu-item-icon-container",html:`<i class="icon-line ${t.icon_svg} gnct_inst_menu_icon"></i></div>`,role:"presentation"}));else if(/^http/.test(t.icon_svg))c.find(`.svg-${n}-holder`).load(t.icon_svg,(function(){let s=$(this).find("svg")[0],i=`global_nav_${n}_svg`;s.setAttribute("id",i),s.setAttribute("class","ic-icon-svg menu-item__icon ic-icon-svg--apps svg-icon-help ic-icon-svg-custom-tray"),"object"==typeof t.svg_size&&(s.setAttribute("height",t.svg_size.height),s.setAttribute("width",t.svg_size.width))}));else if(/^<svg/.test(t.icon_svg)){c.find(`.svg-${n}-holder`).append($(t.icon_svg));let s=c.find(`.svg-${n}-holder`).find("svg")[0],i=`global_nav_${n}_svg`;s.setAttribute("id",i),s.setAttribute("class","ic-icon-svg menu-item__icon ic-icon-svg--apps svg-icon-help ic-icon-svg-custom-tray"),"object"==typeof t.svg_size&&(s.setAttribute("height",t.svg_size.height),s.setAttribute("width",t.svg_size.width))}o.append(c),l.append(a),c=$(`#global_nav_${n}_menu`),a=$(`#${s}`);var r=null;function g(){o.find("a").each((function(){this.onmouseup=this.blur()})),c.removeClass(e),a.find(".gnct-easing").animate({left:"-200px",opacity:.8},300,"linear",(function(){a.hide()}))}c.click((function(){$(this).hasClass(e)?(r.addClass(e),g()):(r=$(`.${e}`),$(".rc-gnct").not(c).click((function(){g()})),setTimeout((function(){$(`.${i}`).removeClass(e),c.addClass(e)}),10),o.find("a").each((function(){this.onmouseup=this.blur()})),a.show(),a.find(".gnct-easing").animate({left:"0px",opacity:1},300,"linear"))})),$(`.${i}`).not(c).click((function(){g()})),$(`#${s}_close`).click((function(){r.addClass(e),g()}))};
globalNavCustomTray(InstIconTray);
})();